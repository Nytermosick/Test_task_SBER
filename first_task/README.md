# –ó–∞–¥–∞–Ω–∏–µ 1 ‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä–∞

–¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è ‚Äî –Ω–∞–π—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –¥–≤–∏–∂–µ–Ω–∏—è –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä–∞ –∏–∑ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ü–µ–ª–µ–≤—É—é —Ç–æ—á–∫—É, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è —Å—É–º–º—É –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤ —Å —É—á—ë—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞:

- –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —É–≥–ª—ã —Å—É—Å—Ç–∞–≤–æ–≤
- —Å–∫–æ—Ä–æ—Å—Ç–∏
- —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è (–º–æ–º–µ–Ω—Ç—ã)

–í—Å—ë —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ **Pinocchio** (–¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∫–∏–Ω–µ–º–∞—Ç–∏–∫–∏ –∏ –¥–∏–Ω–∞–º–∏–∫–∏) –∏ **CasADi** (–¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏). –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ MuJoCo.

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ö–ª–∞—Å—Å `TrajOpt` (`trajopt2simulation/trajopt.py`)

- –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é –¥–∏–Ω–∞–º–∏–∫—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `Pinocchio + CasADi`
- –°—Ç—Ä–æ–∏—Ç –∑–∞–¥–∞—á—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
  - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: —Å–æ—Å—Ç–æ—è–Ω–∏—è `x`, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è `u`
  - RK4-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
  - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ `q`, `v`, `u`
  - —Ü–µ–ª–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è: —ç–Ω–µ—Ä–≥–∏—è + —Ç—Ä–µ–∫–∏–Ω–≥ + —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —à—Ç—Ä–∞—Ñ
- –†–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ IPOPT –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é `q(t)`, `u(t)`

### –ö–ª–∞—Å—Å `Simulator` (`trajopt2simulation/mj_simulator.py`)

- –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é —Å–∏–º—É–ª—è—Ü–∏—é —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –≤ MuJoCo
- –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–∏–¥–µ–æ –∏ –≥—Ä–∞—Ñ–∏–∫–∏:
  1) `real_results.png` ‚Äî —Ä–µ–∞–ª—å–Ω—ã–µ `q(t)`, `v(t)`, `u(t)`
  2) `optimization_results.png` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏
  3) `difference.png` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Å–∏–º—É–ª—è—Ü–∏–∏
  4) `vid.mp4` ‚Äî –≤–∏–¥–µ–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ü–ª–∞–Ω–∞—Ä–Ω—ã–π –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä:

```bash
cd first_task
python planar.py
```

### UR10:

```bash
cd first_task
python ur10.py
```

---

## –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü–ª–∞–Ω–∞—Ä–Ω—ã–π 3R –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä

#### üîπ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è vs —Å–∏–º—É–ª—è—Ü–∏—è (–≥—Ä–∞—Ñ–∏–∫ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ–π)

![Difference](logs/planar/difference.png)

#### üîπ –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

![Optimization](logs/planar/optimization_results.png)  
![Simulated](logs/planar/real_results.png)

#### üîπ –í–∏–¥–µ–æ

<img src="logs/planar/vid.gif" width="600"/>

---

### UR10 –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä

#### üîπ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è vs —Å–∏–º—É–ª—è—Ü–∏—è

![Difference](logs/ur10/difference.png)

#### üîπ –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è

![Optimization](logs/ur10/optimization_results.png)  
![Simulated](logs/ur10/real_results.png)

#### üîπ –í–∏–¥–µ–æ

<img src="logs/ur10/vid.gif" width="600"/>

‚ùóÔ∏è –í —Å–ª—É—á–∞–µ —Å UR10 **—Å—Ñ–µ—Ä–∏—á–µ—Å–∫–æ–µ –∑–∞–ø—è—Å—Ç—å–µ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–æ—á–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –∫ –Ω—É–∂–Ω—ã–º —É–≥–ª–∞–º**. –° —á–µ–º –∏–º–µ–Ω–Ω–æ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ ‚Äî –ø–æ–∫–∞ –Ω–µ –≤—ã—è—Å–Ω–µ–Ω–æ, –Ω–æ, –ø–æ –≤—Å–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏, —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ MuJoCo**, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ —Ç—Ä–µ–Ω–∏–µ, –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏–ª–∏ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏. –í `Pinocchio` –¥–∏–Ω–∞–º–∏–∫–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è –±–µ–∑ —É—á—ë—Ç–∞ —Ç—Ä–µ–Ω–∏—è, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è–º –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –º–æ–º–µ–Ω—Ç–æ–≤ –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä.

---

## –í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ROS2

- –ù–æ–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞.
- –ü–µ—Ä–µ–¥–∞—á–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π —Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ `actions` –∏–ª–∏ `service`.
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏—é –º–æ–∂–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ —Ç–æ–ø–∏–∫ `JointTrajectory` —á–µ—Ä–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–µ `trajectory_msgs/JointTrajectory`.
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ `Rviz` –∏ Gazebo (Ignition).

---